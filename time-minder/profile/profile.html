<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="profile.css" />
    <link rel="stylesheet" href="../../shared/header/headerConLogin.css" />
    <link rel="stylesheet" href="../../shared/footer/footer.css" />
    <link rel="stylesheet" href="../../font.css" />
    <script src="../../xlu-include-file.js"></script>
    <title>Login</title>
  </head>
  <body>
    <header
      id="main_header"
      xlu-include-file="../../shared/header/headerConLogin.html"
    >
      <!--<h1>This is the header of the website</h1>-->
    </header>
    <div class="profile-container">
      <div class="barra-lateral">
        <div>
          <div class="panel">
            <ion-icon id="icono-panel" name="copy-outline"></ion-icon>
            <span>Panel de control</span>
          </div>
        </div>
        <nav class="navegacion">
          <ul>
            <li>
              <a id="editarInformacion" href="profile.html">
                <ion-icon name="create-outline"></ion-icon>
                <span>Editar información</span>
              </a>
            </li>
            <li>
              <a href="../change-color/change-color.html">
                <ion-icon name="color-palette-outline"></ion-icon>
                <span>Cambiar color</span>
              </a>
            </li>
            <li>
              <a href="/index.html">
                <ion-icon name="log-out-outline"></ion-icon>
                <span>Cerrar sesión</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>

      <div class="main-content">
        <h2>Perfil</h2>
        <div class="profile-info">
          <img
            src="../../assets/images/imagen-usuario.png"
            alt="Imagen de perfil"
            class="profile-image"
          />
        </div>
        <button class="change-image-btn">Cambiar Imagen de Perfil</button>

        <form>
          <label for="name">Nombre:</label>
          <input type="text" id="name" name="name" value="Nombre" />

          <label for="lastName">Apellidos:</label>
          <input type="text" id="lastName" name="lastName" value="Apellidos" />

          <button
            href="../components/plan-card/plan-card.html"
            type="buttonPlan"
          >
            Cambiar Plan
          </button>

          <label for="email">Modificar Email:</label>
          <input
            type="email"
            id="email"
            name="email"
            value="correo@ejemplo.com"
          />

          <label for="password">Cambiar Contraseña:</label>
          <input type="password" id="password" name="password" />

          <label for="confirmPassword">Confirmar Contraseña:</label>
          <input type="password" id="confirmPassword" name="confirmPassword" />

          <button type="submit">Guardar Cambios</button>

          <div class="botonesMovimiento">
            <a href="../change-color/change-color.html">
              <ion-icon name="color-palette-outline"></ion-icon>
            </a>
            <a href="/index.html">
              <ion-icon name="log-out-outline"></ion-icon>
            </a>
          </div>
        </form>
      </div>
    </div>

    <footer id="main_footer" xlu-include-file="../../shared/footer/footer.html">
      <!--<h1>This is the footer of the website</h1>-->
    </footer>

    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>

    <script src="/time-minder/profile/profile.js"></script>

    <script>
      xLuIncludeFile();
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", async function () {
        // Buscar el span con el ID 'userName'
        const userNameSpan = document.getElementById("userName");

        try {
          // Obtener la información del usuario
          const name = await getInfoUser("user-1");

          // Verificar si se encontró el span
          if (userNameSpan) {
            // Modificar el contenido del span
            userNameSpan.textContent = name;
          } else {
            console.error('No se encontró el span con el ID "userName"');
          }
        } catch (error) {
          console.error("Error al obtener la información del usuario:", error);
        }
      });

      async function getInfoUser(id) {
        const eventResponse = await fetch("http://localhost:3000/users");
        const data = await eventResponse.json();

        let name = "";
        data.forEach((user) => {
          if (user.id === id) {
            name = user.name;
          }
        });
        return name;
      }

      async function getInfoUser(id) {
        const eventResponse = await fetch("http://localhost:3000/users");
        const data = await eventResponse.json();

        let name = "";
        data.forEach((user) => {
          if (user.id === id) {
            name = user.name;
          }
        });
        return name;
      }
    </script>
  </body>
</html>
