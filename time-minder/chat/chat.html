<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat</title>
    <link rel="stylesheet" href="chat.css">
    <link rel="stylesheet" href="../../shared/header/headerConLogin.css">
    <link rel="stylesheet" href="../../shared/footer/footer.css">
    <link rel="stylesheet" href="../../font.css">
    <script src="../../xlu-include-file.js"></script>
</head>
<body>

    <header xlu-include-file="../../shared/header/headerConLogin.html">
    </header>

    <div id="contenido">
        <aside id="sidebar">
            <h2>Listado de Chats</h2>
            <hr>
            <button class="btnCreateGroup">Crear grupo</button>
            <ul id="chat-list"></ul>
        </aside>
        <main>
            <button id="toggleAsideBtn" class="toggle-aside-btn">Mostrar/Ocultar</button>
            
            <section id="chat-zone"></section>

            <div class="write-zone">
                <textarea id="input-text" placeholder="Escribe ..." ></textarea>
                <button id="send-btn">Enviar</button>
            </div>

        </main>
    </div>
    
    <!-- Modal para crear grupo -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <h2>Crear Grupo</h2>
            <input type="text" id="groupName" placeholder="Nombre del grupo">
            <select id="friendsList" multiple>
                <option value="amigo1">Amigo 1</option>
                <option value="amigo2">Amigo 2</option>
                <option value="amigo3">Amigo 3</option>
                <!-- Agrega más amigos si es necesario -->
            </select>
            <textarea id="groupDescription" placeholder="Descripción del grupo"></textarea>
            <button id="confirmBtn" class="btn-confirm">Confirmar</button>
            <button id="cancelBtn" class="btn-cancel">Cancelar</button>
        </div>
    </div>

    <footer xlu-include-file="../../shared/footer/footer.html"></footer>
    
    <script>
        xLuIncludeFile();
    </script>
    <script src="chat.js"></script>
    
    <script>
        document.addEventListener("DOMContentLoaded", async function () {
          // Buscar el span con el ID 'userName'
          const userNameSpan = document.getElementById("userName");
  
          try {
            // Obtener la información del usuario
            const name = await getInfoUser("user-1");
  
            // Verificar si se encontró el span
            if (userNameSpan) {
              // Modificar el contenido del span
              userNameSpan.textContent = name;
            } else {
              console.error('No se encontró el span con el ID "userName"');
            }
          } catch (error) {
            console.error("Error al obtener la información del usuario:", error);
          }
        });
  
        async function getInfoUser(id) {
          const eventResponse = await fetch("http://localhost:3000/users");
          const data = await eventResponse.json();
  
          let name = "";
          data.forEach((user) => {
            if (user.id === id) {
              name = user.name;
            }
          });
          return name;
        }
  
        async function getInfoUser(id) {
          const eventResponse = await fetch("http://localhost:3000/users");
          const data = await eventResponse.json();
  
          let name = "";
          data.forEach((user) => {
            if (user.id === id) {
              name = user.name;
            }
          });
          return name;
        }
      </script>
</body>
</html>